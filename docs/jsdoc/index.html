<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Home - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AuthManager.html">AuthManager</a></li><li></li><li><a href="NewsManager.html">NewsManager</a></li><li></li><li><a href="PrimaryErrorHandler.html">PrimaryErrorHandler</a></li><li></li><li></li><li></li><li><a href="ProfileManager.html">ProfileManager</a></li><li></li><li><a href="TokenManager.html">TokenManager</a></li><li></li></ul><h3>Global</h3><ul><li><a href="global.html#CityWeather">CityWeather</a></li><li><a href="global.html#CityWeatherByLocation">CityWeatherByLocation</a></li><li><a href="global.html#EmailNewsHeadlines">EmailNewsHeadlines</a></li><li><a href="global.html#GetEveryNews">GetEveryNews</a></li><li><a href="global.html#GetNewsHeadlines">GetNewsHeadlines</a></li><li><a href="global.html#Login">Login</a></li><li><a href="global.html#Profile">Profile</a></li><li><a href="global.html#Register">Register</a></li><li><a href="global.html#SaveNews">SaveNews</a></li><li><a href="global.html#ViewSaveNews">ViewSaveNews</a></li><li><a href="global.html">alreadyExist</a></li><li><a href="global.html#createUniqueId">createUniqueId</a></li><li><a href="global.html#createUser">createUser</a></li><li><a href="global.html#decodeToken">decodeToken</a></li><li><a href="global.html#deleteExistingRefreshTokens">deleteExistingRefreshTokens</a></li><li><a href="global.html#findRefreshToken">findRefreshToken</a></li><li><a href="global.html#findRefreshTokenById">findRefreshTokenById</a></li><li><a href="global.html#hashedPassword">hashedPassword</a></li><li><a href="global.html">issueToken - issueToken method - method to generate token</a></li><li><a href="global.html">notFound</a></li><li><a href="global.html#passportConfig-jwtstrategiesforaccessandrefreshtokenswithpassport.">passportConfig - jwt strategies for access and refresh tokens with passport.</a></li><li><a href="global.html#passportStrategy-configurejwtauthenticationusingpassport">passportStrategy - configure jwt authentication using passport</a></li><li><a href="global.html#saveNews">saveNews</a></li><li><a href="global.html">serverError</a></li><li><a href="global.html">somethingWentWrong</a></li><li><a href="global.html#storeRefreshToken">storeRefreshToken</a></li><li><a href="global.html">unAuthorized</a></li><li><a href="global.html#updateEmail">updateEmail</a></li><li><a href="global.html#updateName">updateName</a></li><li><a href="global.html#updateRefreshToken">updateRefreshToken</a></li><li><a href="global.html#validateEmail">validateEmail</a></li><li><a href="global.html#validateName">validateName</a></li><li><a href="global.html#validateTempMail">validateTempMail</a></li><li><a href="global.html#validateUserId">validateUserId</a></li><li><a href="global.html#verifyPassword">verifyPassword</a></li><li><a href="global.html#viewSaveNews">viewSaveNews</a></li><li><a href="global.html">wrongCredentials</a></li></ul>
    
</nav>

<div id="main">
    

    



    


    <section class="package">
        <h3> </h3>		
    </section>









    



    <section class="readme usertext">
        <article><h1>Smart City Dashboard API</h1>
<img src="https://res.cloudinary.com/dqx0fhscj/image/upload/v1721626636/wmtnmmslzsefkpgkcjsh.jpg">
<p>Welcome to <strong>Smart City Dashboard API</strong>, a robust REST API designed to power a Smart City Dashboard, providing features for user authentication, profile management, news retrieval, weather information, and email notifications.</p>
<h2>Table of Contents</h2>
<ol>
<li><a href="#%F0%9F%93%8C-getting-started">Getting Started</a></li>
<li><a href="#%F0%9F%A7%B0-tech-stack">Tech Stack</a></li>
<li><a href="#%E2%9C%A8-api-endpoints">API Endpoints</a></li>
<li><a href="#additional-features">Additional Features</a></li>
<li><a href="#security-enhancements">Security Enhancements</a></li>
<li><a href="#%F0%9F%9A%80-future-enhancements">Future Enhancements</a></li>
</ol>
<h2>üìå Getting Started</h2>
<p>To get started with the Smart City Dashboard API, follow these steps:</p>
<ol>
<li>
<p><strong>Clone the repository</strong>:</p>
<pre class="prettyprint source lang-bash"><code>git clone https://github.com/your-repo/smart-city-dashboard-api.git
cd smart-city-dashboard-api
</code></pre>
</li>
<li>
<p><strong>Install dependencies</strong>:</p>
<pre class="prettyprint source lang-bash"><code>npm install
</code></pre>
</li>
<li>
<p><strong>Set up environment variables</strong>:
Create a <code>.env</code> file in the root directory and add the necessary environment variables:</p>
<pre class="prettyprint source"><code>PORT=3001
NEW_APIKEY=YOUR NEWS API KEY
WEATHER_APIKEY=YOUR WEATHER API KEY
SESSION_KEY=YOUR SECRET SESSION KEY
</code></pre>
</li>
<li>
<p><strong>Set up the PostgreSQL and create necessary tables</strong>:</p>
<ul>
<li>Set up PostgreSQL connection variables</li>
</ul>
<pre class="prettyprint source"><code>// manage.database.js

const { Client } = require(&quot;pg&quot;);

const client = new Client({
  user: &quot;me&quot;,
  host: &quot;localhost&quot;,
  database: &quot;api&quot;,
  password: &quot;password&quot;,
  port: 5432,
});

module.exports = client;

</code></pre>
<ul>
<li>Create necessary tables:</li>
</ul>
<pre class="prettyprint source"><code>// create users table
CREATE TABLE IF NOT EXISTS users (
    id SERIAL PRIMARY KEY,
    userId VARCHAR(255) NOT NULL,
    name VARCHAR(255),
    email VARCHAR(255),
    password VARCHAR(255),
    role VARCHAR(255) DEFAULT user,
    createdAt TIMESTAMP NOT NULL,
    updatedAt TIMESTAMP NOT NULL
)

// create table to save news
CREATE TABLE IF NOT EXISTS savenews (
    id SERIAL PRIMARY KEY,
    userId VARCHAR(255) NOT NULL,
    newsId VARCHAR(255) NOT NULL,
    title VARCHAR(255),
    description VARCHAR(255),
    urltoimage VARCHAR(255),
    url VARCHAR(255),
    createdAt TIMESTAMP NOT NULL,
    updatedAt TIMESTAMP NOT NULL
)

// create table to save refresh token
CREATE TABLE IF NOT EXISTS refresh (
    id SERIAL PRIMARY KEY,
    userId VARCHAR(255) NOT NULL,
    refreshToken VARCHAR(1000) NOT NULL,
    status BOOLEAN NOT NULL,
    expiresAt VARCHAR(255) NOT NULL,
    createdAt TIMESTAMP NOT NULL DEFAULT NOW(),
    updatedAt TIMESTAMP NOT NULL DEFAULT NOW()
);
</code></pre>
</li>
<li>
<p><strong>Run the server</strong>:</p>
<pre class="prettyprint source lang-bash"><code>npm start
</code></pre>
</li>
</ol>
<h2>üß∞ Tech Stack</h2>
<ul>
<li>Node.js</li>
<li>Express.js</li>
<li>PostgreSQL</li>
</ul>
<h2>‚ú® API Endpoints</h2>
<ul>
<li><strong>POST</strong> Register: Registers a new user with name, email, and password.</li>
<li><strong>POST</strong> Login: Authenticates a user and issues access and refresh tokens.</li>
<li><strong>GET</strong> Profile: Retrieves the authenticated user's profile information.</li>
<li><strong>GET</strong> News Headlines: Fetches top news headlines based on the specified country and page size.</li>
<li><strong>GET</strong> Every News: Fetches news articles based on the specified topic and page size.</li>
<li><strong>POST</strong> Save News: Saves a news article to the authenticated user's account.</li>
<li><strong>GET</strong> View Save News: Retrieves the list of news articles saved by the authenticated user.</li>
<li><strong>PATCH</strong> Update Email: Updates the authenticated user's email address.</li>
<li><strong>PATCH</strong> Update Name: Updates the authenticated user's name.</li>
<li><strong>GET</strong> City Weather: Fetches weather information for a specified city.</li>
<li><strong>GET</strong> Location Weather: Fetches weather information based on specified latitude and longitude.</li>
<li><strong>POST</strong> Email Top News Headlines: Sends an email with the top news headlines to the authenticated user via a Zapier webhook.</li>
</ul>
<h2>Additional Features</h2>
<ul>
<li><strong>Password Hashing &amp; Verification</strong>: Passwords are securely hashed and verified during login.</li>
<li><strong>JWT Token Issuance</strong>: Upon successful login, JWT tokens (access and refresh tokens) are issued for authentication.</li>
<li><strong>Access Control</strong>: Using <code>passport-jwt</code>, access to protected routes is provided only with a valid JWT token.</li>
<li><strong>Error Handling</strong>: Proper error management system is implemented for graceful handling of errors.</li>
<li><strong>Database Integration</strong>: PostgreSQL database is used with Sequelize ORM for efficient data storage and retrieval.</li>
<li><strong>Data Validation</strong>: Validators are implemented to ensure data integrity and security.</li>
</ul>
<h2>üîê Security Enhancements</h2>
<ul>
<li><strong>Helmet Middleware</strong>: Various security headers such as Content Security Policy, Referrer Policy, HSTS, Frameguard, and X-Content-Type-Options are implemented using the Helmet middleware.</li>
<li><strong>CORS Policy</strong>: CORS (Cross-Origin Resource Sharing) policy is implemented to restrict unauthorized access to resources.</li>
<li><strong>Refresh Token Rotation</strong>: Refresh tokens are rotated to enhance security.</li>
<li><strong>Refresh Token Management</strong>: Proper management of refresh tokens is implemented to ensure secure authentication.</li>
<li><strong>Request Validation</strong>: Requests are validated to prevent unauthorized or malformed requests.</li>
</ul>
<h2>üìã API Documentation</h2>
<p>Detailed API documentation including endpoints, request/response formats, and usage examples can be found <a href="https://smartcityserver-prod.onrender.com/api-docs">here</a>.</p>
<h1>üöÄ Future Enhancements</h1>
<p>To further improve the functionality and scalability of SpamBee API, the following features can be considered for future development:</p>
<ul>
<li>Pagination: Implement pagination for endpoints that return lists of data to handle large datasets more efficiently and improve response times.</li>
<li>Containerization: Use Docker to containerize the application, ensuring consistent environments for development, testing, and production, and simplifying deployment processes.</li>
<li>Microservices Architecture: Refactor the application into microservices to improve scalability, maintainability, and ease of deployment. Each service can handle a specific aspect of the application (e.g., user management, contacts management, spam detection).</li>
<li>IP Monitoring: Implement IP monitoring and rate limiting to enhance security by detecting and preventing abuse or malicious activities. This includes tracking IP addresses for login attempts and requests to identify patterns of misuse.</li>
</ul>
<h2>Contact</h2>
<p>For any questions or issues, please contact <a href="mailto:faiz@example.com">Faiz Ali Khan</a>.</p></article>
    </section>









<section>

<header>
    
        <h2>
        
            config/passport.config.js
        
        </h2>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

<dl class="details">
    
    <dt class="tag-description">Description:</dt>
    <dd class="tag-description"><ul class="dummy"><li><p>Configuration file for passport.js and jwt authentication.
Handle access and refresh token strategies</p></li></ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="config_passport.config.js.html">config/passport.config.js</a>, <a href="config_passport.config.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>




            
                <div class="description usertext"><p>Configuration file for passport.js and jwt authentication.
Handle access and refresh token strategies</p></div>
            

            
        
        </div>
    

    

    

    
    
    

     

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>
        
            config/passport.config.js
        
        </h2>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

<dl class="details">
    
    <dt class="tag-description">Description:</dt>
    <dd class="tag-description"><ul class="dummy"><li><p>Configuration file for passport.js and jwt authentication.
Handle access and refresh token strategies</p></li></ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="config_passport.config.js.html">config/passport.config.js</a>, <a href="config_passport.config.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>




            
                <div class="description usertext"><p>Configuration file for passport.js and jwt authentication.
Handle access and refresh token strategies</p></div>
            

            
        
        </div>
    

    

    

    
    
    

     

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>
        
            utils/auth.manager.js
        
        </h2>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

<dl class="details">
    
    <dt class="tag-description">Description:</dt>
    <dd class="tag-description"><ul class="dummy"><li><p>manager the following opertions: finding user, creating user, hashing and verifying password, creating and verifying unique id's</p></li></ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="utils_auth.manager.js.html">utils/auth.manager.js</a>, <a href="utils_auth.manager.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>




            
                <div class="description usertext"><p>manager the following opertions: finding user, creating user, hashing and verifying password, creating and verifying unique id's</p></div>
            

            
        
        </div>
    

    

    

    
    
    

     

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>
        
            utils/auth.manager.js
        
        </h2>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

<dl class="details">
    
    <dt class="tag-description">Description:</dt>
    <dd class="tag-description"><ul class="dummy"><li><p>manager the following opertions: finding user, creating user, hashing and verifying password, creating and verifying unique id's</p></li></ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="utils_auth.manager.js.html">utils/auth.manager.js</a>, <a href="utils_auth.manager.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>




            
                <div class="description usertext"><p>manager the following opertions: finding user, creating user, hashing and verifying password, creating and verifying unique id's</p></div>
            

            
        
        </div>
    

    

    

    
    
    

     

    

    

    

    

    
</article>

</section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.3</a> on Mon Jul 22 2024 11:36:52 GMT+0530 (India Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>